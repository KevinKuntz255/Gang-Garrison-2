<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="OTHER" id="12">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">if(exploded == true) {
    exit;
} else {
  exploded = true;
}
//instance_create(x,y,Explosion);
playsound(x,y,JarateSnd);

with (Character) {
    if (distance_to_object(other) &lt; other.blastRadius and !(team == other.team and id != other.ownerPlayer.object and place_meeting(x, y+1, Obstacle))){
        if(other.team != team) &amp;&amp; !ubered and hp &gt; 0 {
            soaked = true;
            var milk_stacks;
            milk_stacks = ds_map_find_value(effects, SOAK_MILK);
            if (milk_stacks &lt; 1) ds_map_replace(effects, SOAK_MILK, 1); // soak only once
            tracker.alarm[SOAK_MILK] = (other.debuffTime-distance_to_object(other)) / global.delta_factor;
            cloak = false;     
     }
    secondToLastDamageDealer = other.ownerPlayer;
    //lastDamageCrit = other.crit;
    cloakAlpha = min(cloakAlpha + 0.2, 1);
    } if (distance_to_object(other) &lt; other.blastRadius and team == other.team){
     if(other.team == team) &amp;&amp; !ubered and hp &gt; 0 {
        burnDuration = 0;
     }
  }
}
repeat(15*global.gibLevel){
    var blood;
    blood = instance_create(x+random(20)-10,y+random(20)-10,BloodDrop);
    blood.sprite_index = MilkS;
    blood.direction = random(360);
    blood.speed=random(5);
}
</argument>
      </arguments>
    </action>
    <action id="203" library="1">
      <!--action name: Kill_Object-->
      <kind>NORMAL</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>FUNCTION</actionType>
      <functionName>action_kill_object</functionName>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments/>
    </action>
  </actions>
</event>
