<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="CREATE" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">xoffset += sprite_xoffset;
yoffset += sprite_yoffset;
readyToShoot = false;
justShot = false;
alarm[0] = refireTime / global.delta_factor;
    
isMelee = false;
ubering = false;

spark = 0;
alarm[9]= 2;

ability = -1;
abilityVisual = "";
abilityCharge = -1;

meter = 0;
maxMeter = 100;
abilityName = "";
rechargeAbility = RECHARGE;

crit = 1;

// stops crashing as sniper for randomizerMode
t = 0;
baseDamage=-1;
unscopedDamage = 0;


// weaponGrade for Unique/Stock/Special
if (!variable_local_exists("weaponGrade")) weaponGrade = STOCK;
// weaponType for each weapon
if (!variable_local_exists("weaponType")) weaponType = SHOT;

owner = global.paramOwner;
// todo: use an alarm instead
if (owner.runCombo) {
    readyToShoot = true;
    readyToStab = true;
    readyToFlare = true;
    readyToBlast = true;
}

if (owner.ammo[owner.activeWeapon] &lt; maxAmmo) {
    alarm[5] = (reloadBuffer + reloadTime) / global.delta_factor;
    alarm[6] = refireTime / global.delta_factor;
}

ownerPlayer = global.paramOwner.player;
// old variables are kept around for old plugins, can't replace em that easy
switch(owner.player.class)
{
    case CLASS_MEDIC:
    uberCharge = owner.uberChargeC;
    uberReady = owner.uberReadyC;
    break;
    case CLASS_DEMOMAN:
        lobbed = owner.lobbedC;
    break;
}
// 'GW' reward - *G*olden *W*eapon
golden = hasClassReward(ownerPlayer, 'GW');
</argument>
      </arguments>
    </action>
  </actions>
</event>
